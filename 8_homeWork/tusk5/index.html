<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="css/style.css">
	<title>Lesson_8_tusk_5</title>
</head>

<body>
	<div class="container">
		<h1 class="tusk-description">
			Задача 9. Морський бій. Користувач вводить кількість клітинок одновимірного масиву та кількість одиночних
			кораблів. Комп’ютер довільно розміщує ці одиночні кораблі у масиві по один у клітинці (якщо у клітинці 0, то
			клітинка пуста, якщо 1 – то це означає, що там є корабель. Користувач вводить номер клітинки, куди стріляє. Гра
			продовжується до тих пір, поки не будуть потоплені усі кораблі.
		</h1>
		<div class="container__items">
			<div class="output-container">
				<div class="output-container__item first">
					<button class="button-one">Click t start</button>
				</div>
				<div>
					<p class="out"></p>
				</div>
				<a href="../index.html">Return</a>
			</div>

		</div>
		<script>
			// first 
			// Задача 9. Морський бій. Користувач вводить кількість клітинок одновимірного масиву та кількість одиночних кораблів. Комп’ютер довільно розміщує ці одиночні кораблі у масиві по один у клітинці (якщо у клітинці 0, то клітинка пуста, якщо 1 – то це означає, що там є корабель. Користувач вводить номер клітинки, куди стріляє. Гра продовжується до тих пір, поки не будуть потоплені усі кораблі.
			const first = document.querySelector('.first')
			const input = first.querySelectorAll('input')
			const out = document.querySelector('.out');

			first.querySelector('.button-one').addEventListener('click',
				function () {
					let numberOfCells = parseInt(prompt(`how much cells do you want to put in`)) 
					let numberOfShips = parseInt(prompt(`how much ships do you want to put in`)) 
					function getRandNum(min, max) {
						let rand = min + Math.floor(Math.random() * (max - min + 1));
						return rand;
					}

					function getArrWithZero(cell) {
						let returnCell = []
						for (let i = 0; i < cell; i++) {
							returnCell.push(0)
						}
						return returnCell
					}

					function getArrWithOnes(ships, cells) {
						let returnArrNew = [...cells]
						let count = 0
						while (count !== ships) {
							let random = getRandNum(0, returnArrNew.length - 1)
							console.log(random);

							if (returnArrNew[random] !== 1) {
								returnArrNew[random] = 1
								count++
							}
						}
						return returnArrNew
					}

					function gameProcess(field, ships) {
						let count = 0
						let leftShips = ships
						let shootIndexes = ``
						let goodShotArr = []
						while (count !== ships) {
							let shoot = parseInt(prompt(`enter number where to shoot`))
							if (field[shoot] === 1) {
								count++
								leftShips = leftShips - 1
								alert(`Good shoot, you have shot cell number ${shoot} you need to shoot ${leftShips} more ships`)
								goodShotArr.push(shoot)
							} else if (goodShotArr.includes(shoot)) {
								shootIndexes += shoot
								alert(`You have already shot that cell. Don\`t shoot  = ${goodShotArr}`)
							} else {
								shootIndexes += shoot
								alert(`You missed. Don\`t miss  = ${shootIndexes}`)
							}
						}
						alert(`good job push the button to repeat`)
					}

					let zeroArr = getArrWithZero(numberOfCells)
					let gameArr = getArrWithOnes(numberOfShips, zeroArr)
					gameProcess(gameArr, numberOfShips)
				})

		</script>
</body>

</html>